  
   
    <div class="form-body">  
        {% for groupe   in  groupes %}
             <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                    <div class="panel panel-default">
                             <div class="panel-heading" role="tab" id="heading{{groupe.grparAn.id}}">
                                      <h4 class="panel-title h4-default">
                                              <div class="row">
                                                 <div class="col-md-10">
                                                     <a id="idCollapse{{ groupe.grparAn.id}}" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse{{ groupe.grparAn.id}}" aria-expanded="true" aria-controls="collapse{{ groupe.grparAn.id}}">
                                                         <i id="idCollapseI{{ groupe.grparAn.id}}" class="btn btn-default fa fa-compress text-center"></i>
                                                         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ groupe.grparAn.grparRef.codeGrp }} {{ groupe.grparAn.grparRef.libelleGrp }} {{ groupe.grparAn.grparRef.typeGrp }} 
                                                   </a>
                                                </div>
                                                 <div class="col-md-2 pull-right text-info">
                                                       <ul class="list-inline">
                                                         <li><span class="label label-default">{{ groupe.paramAns | length}}</span></li>
                                                        </ul>  
                                                  </div>
                                            </div>            
                                       </h4>
                             </div>
                             <div id="collapse{{ groupe.grparAn.id}}" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="heading{{ groupe.grparAn.id}}">
                                      <div class="panel-body">
                                                <div class="row">
                                                         <div class="col-xm-1"></div>
                                                         <div class="col-xm-10">
                                                                   <table class="table table-bordered table-condensed table-advance " id="idTable{{ groupe.grparAn.id}}">
                                                                             <thead>
                                                                                      <tr>
                                                                                        <th>Code</th> 
                                                                                        <th>Libelle</th> 
                                                                                        <th>Unité</th> 
                                                                                        <th>Fraction</th> 
                                                                                      </tr>
                                                                             </thead>
                                                                             <tbody>
                                                                                      {% for paramAn in groupe.paramAns %}
                                                                                               {% if  paramAn.paramAn %}
                                                                                                   {% if user.prestataire.adrCorId == paramAn.paramAn.prestataire.adrCorId %}
                                                                                                        <tr>
                                                                                                            <td nowrap>{{ paramAn.paramAn.codeParametre.codeParametre }}</td>
                                                                                                            <td>{{ paramAn.paramAn.codeParametre.nomParametre }}</td>
                                                                                                            <td>
                                                                                                                {% if paramAn.unite %}
                                                                                                                         {{ paramAn.unite.symbole }}
                                                                                                                {% else %}
                                                                                                                      {% for unite in paramAn.unites %}
                                                                                                                          {{ unite.symbole }}
                                                                                                                      {% endfor %}
                                                                                                                {% endif %}
                                                                                                                </td>
                                                                                                            <td>{{ paramAn.paramAn.codeFraction }}</td>
                                                                                                        </tr>
                                                                                                   {% endif %}
                                                                                                {% endif %}
                                                                                      {% endfor %}
                                                                             </tbody>
                                                                   </table>
                                                         </div>
                                                </div>
                                      </div>
                             </div>
                    </div>
             </div>
        {% endfor %}
    </div>


<script type="text/javascript" language="javascript">
    
          {% for groupe   in  groupes %}
              
             
                   $('#idCollapse{{groupe.grparAn.id}}').on('click',function(){
                             if ($('#idCollapseI{{groupe.grparAn.id}}').hasClass("fa-compress")){
                                  $('#idCollapseI{{groupe.grparAn.id}}').removeClass("fa-compress").addClass("fa-expand");
                                   $('#collapse{{groupe.grparAn.id}}').collapse('hide');
                              }else{
                                 $('#idCollapseI{{groupe.grparAn.id}}').removeClass("fa-expand").addClass("fa-compress");
                                  $('#collapse{{groupe.grparAn.id}}').collapse('show');
                              }
                   });

              
                    var table{{groupe.grparAn.id }} = $('#idTable{{ groupe.grparAn.id }}').DataTable(
                        {"stateSave": true,
                         "order": [[ 0, "desc" ]],
                        "oLanguage": {
                        "sSearch": "Filtre",
                        "sFirst": "1ere page",
                        "sLast": "Dernière page",
                        "sNext": "Prochaine page",
                        "sPrevious": "Page précédente",
                        "EmptyTable": "Pas de données",
                        "sInfo": "Nombre d'enregistrements :  _TOTAL_",
                        "sInfoFiltered": " - filtrés sur _MAX_ enregistrements",
                        "sZeroRecords": "Pas d'enregistrement à afficher",
                        "sInfoEmpty": "Pas d'enregistrement à afficher",
                        "sInfoThousands": " ",
                        "sLengthMenu": 'Afficher <select>' +
                            '<option value="10">10</option>' +
                            '<option value="20">20</option>' +
                            '<option value="30">30</option>' +
                            '<option value="40">40</option>' +
                            '<option value="50">50</option>' +
                            '<option value="-1">Tous</option>' +
                            '</select> enregistrements',
                        "sPaginationType": "full_numbers"
                        }
                        }
                        );
        
         {% endfor %}
             
                               
            $('#expandAll').hide();
            $('#collapseAll').show();          

           $('#expandAll').on('click',function(){
                   {% for groupe   in  groupes %}
                          $('#idCollapseI{{groupe.grparAn.id}}').removeClass("fa-expand").addClass("fa-compress");
                           $('#collapse{{groupe.grparAn.id}}').collapse('show');
                           $('#expandAll{{groupe.grparAn.id}}').hide();
                           $('#collapseAll{{groupe.grparAn.id}}').show();          
                     {% endfor %}
                      $('#expandAll').hide();
                      $('#collapseAll').show();
               });

           $('#collapseAll').on('click',function(){
                    {% for groupe   in  groupes %}
                           $('#idCollapseI{{groupe.grparAn.id}}').removeClass("fa-compress").addClass("fa-expand");
                           $('#collapse{{groupe.grparAn.id}}').collapse('hide');
                           $('#expandAll{{groupe.grparAn.id}}').show();
                           $('#collapseAll{{groupe.grparAn.id}}').hide(); 
                     {% endfor %}
                      $('#expandAll').show();
                      $('#collapseAll').hide();
           });

   
    
   </script>