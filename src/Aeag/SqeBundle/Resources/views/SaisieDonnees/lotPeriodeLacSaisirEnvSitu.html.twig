{% extends "AeagSqeBundle::layout.html.twig" %}

{% block breadcrumb %}
    <li>
        <a href="{{ path('aeag_homepage') }}">Accueil</a> 
    </li>
    <li>
        <a href="{{ path('AeagSqeBundle_saisieDonnees_index') }}">Saisie des données</a> 
    </li>
    <li>
        <a href="{{ path('AeagSqeBundle_saisieDonnees_index') }}">Lots</a> 
    </li>
    <li>
        <a href="{{path('AeagSqeBundle_saisieDonnees_lot_periodes',{ 'lotanId': lotan.id })}}">Périodes</a> 
    </li>
    <li>
        <a href="{{path('AeagSqeBundle_saisieDonnees_lot_periode_lacs',{ 'periodeAnId': periodeAn.id })}}">Lacs</a> 
    </li>
    <li class="active">
        Saisie des données terrain
    </li>
{% endblock breadcrumb %} 

{% block modal %}
    <div class="modal fade" id="modal-generer">
        <div class="modal-dialog modal-window">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="modal-genererLabel">Génération des profondeurs dans le groupe in situ</h4>
                </div>
                <div class="modal-body">
                    <h4>Cliquer sur enregistrer pour générer les profondeurs dans le groupe in situ</h4>
                    <br/><br/>
                    <div class="alert alert-danger">Attention : les valeur saisies pour les profondeurs supérieures à la profondeur du lac seront perdues</div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal"><i class="fa fa-undo"></i> Annuler</button>
                    <button id="idGenerer" type="submit" class="btn btn-success"> 
                        <i class="fa fa-cogs"> genérer</i>
                    </button>
                </div>
            </div>
        </div>
    </div>  


    <div class="modal fade" id="modal-commentaire">
        <div class="modal-dialog modal-scroll modal-lg">
            <div class="modal-content">
                <form class="form" id="idFormCommentaire" role="form" action="#" method="post">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="idHeaderCommentaire">Station :  {{ station.code }} {{ station.libelle }}</h4>
                    </div>
                    <div id="idBodyCommentaire" class="modal-body">
                        <h4>Commentaire</h4>
                        <br/><br/>
                        <textarea name="textareaCommentaire" rows="10" cols="110">{{ cmdPrelevPcs.0.commentaire }}</textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal"><i class="fa fa-undo"></i> Annuler</button>
                        <button id="idenregisterCommentaire" class="btn btn-success"> 
                            <i class="fa fa-cogs"> Enregistrer</i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

{% endblock modal %}

{%block panel_heading %}
    <div class="row">
        <div class="col-md-offset-3 col-md-7">
            <h3 class="page-title ">
                <table>
                    <tr><td>Station {{ station.code }} {{ station.libelle }}</td></tr>
                    <tr><td>prévu entre le  {{ periodeAn.periode.dateDeb | date("d/m/Y") }}&nbsp;&nbsp;et&nbsp;&nbsp; {{ dateFin | date("d/m/Y") }}</td></tr>
                    <tr><td nowrap>pour le lot :  {{ lotan.lot.nomLot }} - {{ lotan.anneeProg }}  - version :  {{ lotan.version }}</td></tr>
                </table>
            </h3>
        </div>

    </div>
{%endblock panel_heading %}

{%block content %}

    <form class="form" id="idForm" role="form" action="{{ path("AeagSqeBundle_saisieDonnees_lot_periode_lac_env_situ_resultat",{"prelevId":  cmdPrelev.id, "periodeAnId":  periodeAn.id, "stationId": station.ouvFoncId}) }}" method="post">

        <div class="row responsive">
            <div class="col-xm-12">
                <div class="small ">   

                    <div class="form-group form-inline">
                        <div class="col-md-1  pull-right">
                            <a id="expandAll" href="#" class="btn btn-primary" role="button"><i class="fa fa-expand"></i></a>
                            <a id="collapseAll" href="#" class="btn btn-primary" role="button"><i class="fa fa-compress"></i></a>
                        </div>
                    </div>

                    <div class="form-group form-inline">
                        <label class="col-md-offset-2 col-xs-1  control-label text-center">Commentaire</label>
                        <label class="col-xs-2 control-label text-center">Date prélèvement</label>
                        <label class="col-xs-2 control-label text-center">Profondeur du lac (m)</label>
                        <label class="col-xs-2 control-label text-center">Mesure tous les</label>
                    </div>
                    <div class="form-group form-inline">
                        <div class="col-md-offset-2 col-xs-1 input-group text-center">
                            <a id="idCommentaire{{ cmdPrelev.id }}" href="#" class="btn btn-primary" value="{{ cmdPrelevPcs.0.commentaire }} "> 
                                <i class="fa fa-commenting"></i>
                            </a>
                        </div>
                        <div class="col-xs-2  input-group">
                            <input type="text" id="datePrel" name="datePrel" required="required" class="form-control text-center" placeholder="Date prélèvement" value="{%if cmdPrelev.datePrelev %}{{ cmdPrelev.datePrelev | date("d/m/Y H:i") }}{% endif %}">
                        </div>
                        <div class="col-xs-2  input-group">
                            <input type="text" id="profMax" name="profMax" required="false" class="form-control number text-right" placeholder="Profondeur du lac" value="{{ cmdPrelev.profMax }}">
                        </div>
                        <div class="col-xs-2  input-group">
                            <select class="form-control number text-right" id="ecart" name="ecart" >   
                                <option value="0.5">0.5 m</option> 
                                <option value="1" selected>1 m</option> 
                            </select>
                        </div>

                        <a class="btn btn-success" data-toggle="modal" href="#modal-generer" title="Générer les profondeurs">
                            <i class="fa fa-cogs"> Générer</i>
                        </a>

                    </div>

                    {% if autreDemandes | length %}
                        <div class="row">
                            <div class="col-md-offset-3 col-xs-5">
                         <table class="table table-bordered table-condensed">
                             <thead>
                                    <th>Non réalisé</th>
                                    <th>Analyse</th>
                                    <th>Support</th>
                                    <th>Profondeur (m)</th>
                         </thead>
                         <tbody>
                      {% for autreDemande in autreDemandes %}
                            {% for autrePrelev  in  autreDemande.prelevs %}
                                <tr>
                                    <td>
                                        <div class="checkbox">
                                            <label>
                                                {% if autrePrelev.prelev.realise == 'N' %}
                                                        <input type="checkbox" id="nonRealise_{{ autrePrelev.prelevPc.zoneVerticale.codeZone }}_{{ autrePrelev.prelev.codeSupport.codeSupport }}" name="nonRealise_{{ autrePrelev.prelevPc.zoneVerticale.codeZone }}_{{ autrePrelev.prelev.codeSupport.codeSupport }}"   class="form-control" placeholder="Non réalisé"  checked>
                                                {% else %}
                                                        <input type="checkbox" id="nonRealise_{{ autrePrelev.prelevPc.zoneVerticale.codeZone }}_{{ autrePrelev.prelev.codeSupport.codeSupport }}" name="nonRealise_{{ autrePrelev.prelevPc.zoneVerticale.codeZone }}_{{ autrePrelev.prelev.codeSupport.codeSupport }}"   class="form-control" placeholder="Non réalisé" >
                                                {% endif %}
                                                </label>
                                       </div>
                                    </td>
                                    <td>
                                        {{ autrePrelev.prelevPc.zoneVerticale.nomZone }}
                                    </td>
                                    <td>
                                         {% if autrePrelev.prelev.codeSupport %}
                                            {{ autrePrelev.prelev.codeSupport.nomSupport }}
                                        {% endif %}
                                    </td>
                                    <td>
                                         <input type="text" id="profAna_{{ autrePrelev.prelevPc.zoneVerticale.codeZone }}_{{ autrePrelev.prelev.codeSupport.codeSupport }}" name="profAna_{{ autrePrelev.prelevPc.zoneVerticale.codeZone }}_{{ autrePrelev.prelev.codeSupport.codeSupport }}" required="required" class="form-control  number text-right" placeholder="Profondeur de l'analyse" value="{{ autrePrelev.prelevPc.profondeur  }}">
                                    </td>
                                </tr>
                              {% endfor %}
                         {% endfor %}
                                      </tbody>
                                  </table>
                              </div>
                        </div>
                    {% endif %}

                    {% set groupeSelectionne = null %}
                    {% set nbTr = 0 %}
                    {% set nbTd = 0 %}
                    {% for groupe   in  groupes %}
                        <div id="idGenerer{{ groupe.grparAn.id}}"
                             <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                                <div class="panel panel-default">
                                    {% if user.prestataire and (user.prestataire.adrCorId == groupe.grparAn.prestaDft.adrCorId)  %}
                                        <div class="panel-heading" role="tab" id="heading{{groupe.grparAn.id}}">
                                            <h4 class="panel-title h4-default">
                                                <div class="row">
                                                    <div class="col-md-8">
                                                        <a id="idCollapse{{ groupe.grparAn.id}}" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse{{ groupe.grparAn.id}}" aria-expanded="true" aria-controls="collapse{{ groupe.grparAn.id}}">
                                                            <i id="idCollapseI{{ groupe.grparAn.id}}" class="btn btn-default fa fa-compress text-center"></i>
                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ groupe.grparAn.grparRef.codeGrp }} {{ groupe.grparAn.grparRef.libelleGrp }}
                                                        </a>
                                                    </div>
                                                    <div class="col-md-4 pull-right text-info">
                                                        <ul class="list-inline">
                                                            <li><span  class="label label-success">{{ groupe.correct}}</li>
                                                            <li><span  class="label label-warning">{{ groupe.warning}}</li>
                                                            <li><span  class="label label-danger">{{ groupe.erreur}}</li>
                                                            <li><span  class="label label-primary"><span id="paramSaisis{{ groupe.grparAn.id}}">0</span>/{{ groupe.paramAns | length}}</span></li>
                                                        </ul>  
                                                    </div>
                                                </div>            
                                            </h4>
                                        </div>
                                    {% else %}
                                        <div class="panel-heading" role="tab" id="heading{{groupe.grparAn.id}}">
                                            <h4 class="panel-title h4-default">
                                                <div class="row">
                                                    <div class="col-md-8">
                                                        <a id="idCollapse{{ groupe.grparAn.id}}" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse{{ groupe.grparAn.id}}" aria-expanded="true" aria-controls="collapse{{ groupe.grparAn.id}}">
                                                            <i id="idCollapseI{{ groupe.grparAn.id}}" class="btn btn-default fa fa-compress text-center"></i>
                                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ groupe.grparAn.grparRef.codeGrp }} {{ groupe.grparAn.grparRef.libelleGrp }}
                                                            &nbsp;renseigné par le prestataire {{ groupe.grparAn.prestaDft.nomCorres }}
                                                            &nbsp; &nbsp; &nbsp;{{ groupe.grparAn.grparRef.typeGrp  }}
                                                        </a>
                                                    </div>
                                                    <div class="col-md-3 pull-right text-info">
                                                        <ul class="list-inline">
                                                            <li><span  class="label label-success">{{ groupe.correct}}</li>
                                                            <li><span  class="label label-warning">{{ groupe.warning}}</li>
                                                            <li><span  class="label label-danger">{{ groupe.erreur}}</li>
                                                            <li><span  class="label label-primary"><span id="paramSaisis{{ groupe.grparAn.id}}">0</span>/{{ groupe.paramAns | length}}</span></li>
                                                        </ul>  
                                                    </div>
                                                </div>            
                                            </h4>
                                        </div>
                                    {% endif %}
                                    <div id="collapse{{ groupe.grparAn.id}}" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="heading{{ groupe.grparAn.id}}">
                                        <div class="panel-body">
                                            <table class="table table-bordered " id="idTable{{ groupe.grparAn.id}}">
                                                <thead>
                                                    <tr>
                                                        {% if  groupe.grparAn.grparRef.typeGrp == 'SIT'%}
                                                            <th>Profondeur</th>
                                                            {% endif %}
                                                        <th>Code</th> 
                                                        <th>Libelle</th> 
                                                        <th>prestataire</th>
                                                        <th>Remarque</th> 
                                                        <th>valeur</th> 
                                                        <th>Unité</th> 
                                                        <th>Fraction</th> 
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {% for paramAn in groupe.paramAns %}
                                                        {% if  paramAn.paramAn %}
                                                            {% set nbTr = nbTr + 1 %}
                                                            {% if paramAn.paramAn.codeParametre.codeParametre  == '1301' or 
                                                                                                                   paramAn.paramAn.codeParametre.codeParametre  == '1302' or 
                                                                                                                   paramAn.paramAn.codeParametre.codeParametre  == '1303' or
                                                                                                                   paramAn.paramAn.codeParametre.codeParametre  == '1311' or 
                                                                                                                   paramAn.paramAn.codeParametre.codeParametre  == '1312' %}
                                                        <input type="hidden" id="idGroupeSelectionne" value="{{ groupe.grparAn.id }}">
                                                    {% endif %}

                                                    {% if is_granted('ROLE_ADMINSQE') or  (user.prestataire.adrCorId == paramAn.paramAn.prestataire.adrCorId)  %}

                                                        {% if groupe.grparAn.grparRef.typeGrp == 'ENV'  %}
                                                            {% if paramAn.pgCmdMesureEnv %}
                                                                {% if paramAn.pgCmdMesureEnv.codeStatut == '0' %}
                                                                    <tr id='tr_{{ nbTr }}'class="success">
                                                                    {% elseif paramAn.pgCmdMesureEnv.codeStatut == '1' %}
                                                                    <tr id='tr_{{ nbTr }}' class="warning" data-toggle="tooltip" data-placement="bottom" title="{{ paramAn.pgCmdMesureEnv.libelleStatut}}">
                                                                    {% else %}
                                                                    <tr id='tr_{{ nbTr }}' class="danger" data-toggle="tooltip" data-placement="bottom" title="{{ paramAn.pgCmdMesureEnv.libelleStatut}}">
                                                                    {% endif %}
                                                                {% else %}
                                                                <tr id='tr_{{ nbTr }}'>
                                                                {% endif %}
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' nowrap>{{ paramAn.paramAn.codeParametre.codeParametre }}</td>
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' align="left">{{ paramAn.paramAn.codeParametre.nomParametre }}</td>
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' align="left">{{ paramAn.paramAn.prestataire.nomCorres }}</td>
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' align="right">
                                                                    <div class="form-group">
                                                                        <div class="input-group text-left">
                                                                            <select class="form-control" id="idRemarque{{ paramAn.paramAn.id}}" name="remarque{{ paramAn.paramAn.id}}"   >    
                                                                                <option value="0">0 : Donnée absente</option> 
                                                                                <option value="1"  selected>1 : Donnée renseignée</option> 
                                                                            </select>
                                                                        </div>
                                                                    </div> 
                                                                </td>
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' align="right">
                                                                    <div class="form-group">
                                                                        <div class="input-group text-right">
                                                                            {% if paramAn.valeurs  %}
                                                                                <select class="form-control" id="idValeur{{ paramAn.paramAn.id}}" name="valeur{{ paramAn.paramAn.id}}"   >    
                                                                                    <option value=""></option> 
                                                                                    {% for valeur in paramAn.valeurs %}
                                                                                        {% if paramAn.pgCmdMesureEnv %}
                                                                                            {% if paramAn.pgCmdMesureEnv.resultat == valeur.valeur %}
                                                                                                <option value="{{valeur.valeur  | replace({".00" : ""})}}" selected>{{valeur.valeur  | replace({".00" : ""})}} : {{valeur.libelle }}</option> 
                                                                                            {% else %}
                                                                                                <option value="{{valeur.valeur  | replace({".00" : ""}) }}">{{valeur.valeur  | replace({".00" : ""})}} : {{ valeur.libelle }}</option> 
                                                                                            {% endif %}
                                                                                        {% else %}
                                                                                            <option value="{{valeur.valeur  | replace({".00" : ""})}}">{{valeur.valeur  | replace({".00" : ""})}} : {{ valeur.libelle}}</option> 
                                                                                        {% endif %}
                                                                                    {% endfor %}
                                                                                </select>
                                                                            {% else %}
                                                                                {% if paramAn.pgCmdMesureEnv %}
                                                                                    <input id="idValeur{{ paramAn.paramAn.id}}"  class="form-control number text-right" placeholder="valeur" name ="valeur{{ paramAn.paramAn.id}}" value="{{ paramAn.pgCmdMesureEnv.resultat | replace({".0000000000" : "", "000000000" : "", "00000000" : "", "0000000" : "", "000000" : "", "00000000" : "", "0000000" : "", "000000" : ""}) }}">
                                                                                {% else %}
                                                                                    <input id="idValeur{{ paramAn.paramAn.id}}" class="form-control number text-right" placeholder="valeur" name ="valeur{{ paramAn.paramAn.id}}" value="">
                                                                                {% endif %}
                                                                            {% endif %}
                                                                        </div>
                                                                    </div> 
                                                                </td>
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' align="left">
                                                                    <div class="form-group">
                                                                        <div  class="input-group text-left">
                                                                            {% if paramAn.unites  %}
                                                                                {% if paramAn.unites | length > 1 %}
                                                                                    <select class="form-control" id="idUniteCode{{ paramAn.paramAn.id}}" name="uniteCode{{ paramAn.paramAn.id}}"   >    
                                                                                        {% for unite in paramAn.unites %}
                                                                                            <option value="{{unite.codeUnite.codeUnite}}">{{unite.codeUnite.codeUnite}} : {{ unite.codeUnite.nomUnite}}</option> 
                                                                                        {% endfor %}
                                                                                    </select>
                                                                                {% else %}
                                                                                    <input id="idUniteCode{{ paramAn.paramAn.id}}" type="hidden" class="form-control" placeholder="unite" name ="uniteCode{{ paramAn.paramAn.id}}" value="{{paramAn.unites.0.codeUnite.codeUnite}}" readonly="readonly">
                                                                                    <input id="idUnite{{ paramAn.paramAn.id}}" type="text" class="form-control" placeholder="unite" name ="unite{{ paramAn.paramAn.id}}" value="{{paramAn.unites.0.codeUnite.codeUnite}} : {{paramAn.unites.0.codeUnite.nomUnite}}" readonly="readonly">
                                                                                {% endif %}
                                                                            {% else %}
                                                                                {% if paramAn.pgCmdMesureEnv %}
                                                                                    <input id="idUniteCode{{ paramAn.paramAn.id}}" type="hidden" class="form-control" placeholder="unite" name ="uniteCode{{ paramAn.paramAn.id}}" value="{{ paramAn.pgCmdMesureEnv.codeUnite.codeUnite }}">
                                                                                    <input id="idUnite{{ paramAn.paramAn.id}}" type="text" class="form-control" placeholder="unite" name ="unite{{ paramAn.paramAn.id}}" value="{{ paramAn.pgCmdMesureEnv.codeUnite.codeUnite }} : {{ paramAn.pgCmdMesureEnv.codeUnite.nomUnite }}" readonly="readonly">
                                                                                {% else %}
                                                                                    <input id="idUniteCode{{ paramAn.paramAn.id}}" type="hidden" class="form-control" placeholder="unite" name ="uniteCode{{ paramAn.paramAn.id}}" value="{{ paramAn.unite.codeUnite }}">
                                                                                    <input id="idUnite{{ paramAn.paramAn.id}}" class="form-control" placeholder="unite" name ="unite{{ paramAn.paramAn.id}}" value="{{ paramAn.unite.codeUnite }} : {{ paramAn.unite.nomUnite }}" readonly="readonly">
                                                                                {% endif %}
                                                                            {% endif %}
                                                                        </div>
                                                                    </div> 
                                                                </td>
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' align="left">
                                                                    {% if paramAn.fraction %}
                                                                        <span class="text-left">{{ paramAn.fraction.nomFraction }}</span>
                                                                    {% endif %}
                                                                </td>
                                                            </tr>
                                                        {% endif %}

                                                        {% if groupe.grparAn.grparRef.typeGrp == 'SIT'  %}

                                                            {% if paramAn.paramAn.codeParametre.codeParametre  == '1301' or 
                                                                                                                                paramAn.paramAn.codeParametre.codeParametre  == '1302' or 
                                                                                                                                paramAn.paramAn.codeParametre.codeParametre  == '1303' or
                                                                                                                                paramAn.paramAn.codeParametre.codeParametre  == '1311' or 
                                                                                                                                paramAn.paramAn.codeParametre.codeParametre  == '1312' %}
                                                            {% if paramAn.pgCmdAnalyse %}
                                                                {% if paramAn.pgCmdAnalyse.codeStatut == '0' %}
                                                                    <tr id='tr_{{ nbTr }}' class="success">
                                                                    {% elseif paramAn.pgCmdAnalyse.codeStatut == '1' %}
                                                                    <tr id='tr_{{ nbTr }}' class="warning" data-toggle="tooltip" data-placement="bottom" title="{{ paramAn.pgCmdAnalyse.libelleStatut}}">
                                                                    {% elseif paramAn.pgCmdAnalyse.codeStatut == '2' %}
                                                                    <tr id='tr_{{ nbTr }}' class="danger" data-toggle="tooltip" data-placement="bottom" title="{{ paramAn.pgCmdAnalyse.libelleStatut}}" >
                                                                    {% else %}
                                                                    <tr>
                                                                    {% endif %}
                                                                {% else %}
                                                                <tr id='tr_{{ nbTr }}'>
                                                                {% endif %}

                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' align="right">
                                                                    {% if paramAn.pgCmdPrelevPc %}
                                                                        {{ paramAn.pgCmdPrelevPc.profondeur | number_format( 2,","," ")  }}
                                                                        <input type="hidden" id ="numOrdre-{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" name="numOrdre-{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" value ="{{ paramAn.pgCmdPrelevPc.numOrdre }}">
                                                                    {% endif %}
                                                                </td>
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' nowrap>{{ paramAn.paramAn.codeParametre.codeParametre }}</td>
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' align="left">{{ paramAn.paramAn.codeParametre.nomParametre }}</td>
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' align="left">{{ paramAn.paramAn.prestataire.nomCorres }}</td>
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' align="right">
                                                                    <div class="form-group">
                                                                        <div class="input-group text-left">
                                                                            <select class="form-control" id="idRemarque{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" name="remarque{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}"   >    
                                                                                <option value="1"  selected>1 : Donnée renseignée</option> 
                                                                                <option value="0">0 : Donnée absente</option> 
                                                                            </select>
                                                                        </div>
                                                                    </div> 
                                                                </td>
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' align="right">
                                                                    <div class="form-group">
                                                                        <div class="input-group text-right">
                                                                            {% if paramAn.valeurs  %}
                                                                                <select class="form-control" id="idValeur{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" name="valeur{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}"   >   
                                                                                    <option value=""></option> 
                                                                                    {% for valeur in paramAn.valeurs %}
                                                                                        {% if paramAn.pgCmdAnalyse %}
                                                                                            {% if paramAn.pgCmdAnalyse.resultat == valeur.valeur %}
                                                                                                <option value="{{valeur.valeur  | replace({".00" : ""}) }}" selected>{{valeur.valeur  | replace({".00" : ""}) }} : {{valeur.libelle }}</option> 
                                                                                            {% else %}
                                                                                                <option value="{{valeur.valeur  | replace({".00" : ""}) }}">{{valeur.valeur  | replace({".00" : ""}) }} : {{ valeur.libelle }}</option> 
                                                                                            {% endif %}
                                                                                        {% else %}
                                                                                            <option value="{{valeur.valeur  | replace({".00" : ""}) }}">{{valeur.valeur  | replace({".00" : ""}) }} : {{ valeur.libelle}}</option> 
                                                                                        {% endif %}
                                                                                    {% endfor %}
                                                                                </select>
                                                                            {% else %}
                                                                                {% if paramAn.pgCmdAnalyse %}
                                                                                    <input id="idValeur{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" class="form-control number text-right" placeholder="valeur" name ="valeur{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" value="{{ paramAn.pgCmdAnalyse.resultat | replace({".0000000000" : "", "000000000" : "", "00000000" : "", "0000000" : "", "000000" : "", "00000000" : "", "0000000" : "", "000000" : ""}) }}">
                                                                                {% else %}
                                                                                    <input id="idValeur{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" class="form-control number text-right" placeholder="valeur" name ="valeur{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" value="">
                                                                                {% endif %}
                                                                            {% endif %}
                                                                        </div>
                                                                    </div> 
                                                                </td>
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' align="left">
                                                                    <div class="form-group">
                                                                        <div  class="input-group text-left">
                                                                            {% if paramAn.unites  %}
                                                                                {% if paramAn.unites | length > 1 %}
                                                                                    <select class="form-control" id="idUniteCode{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" name="uniteCode{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}"   >   
                                                                                        {% for unite in paramAn.unites %}
                                                                                            <option value="{{unite.codeUnite.codeUnite}}">{{unite.codeUnite.codeUnite}} : {{ unite.codeUnite.nomUnite}}</option> 
                                                                                        {% endfor %}
                                                                                    </select>
                                                                                {% else %}
                                                                                    <input id="idUniteCode{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" type="hidden" class="form-control" placeholder="unite" name ="uniteCode{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" value="{{paramAn.unites.0.codeUnite.codeUnite}}" readonly="readonly">
                                                                                    <input id="idUnite{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" type="text" class="form-control" placeholder="unite" name ="unite{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" value="{{paramAn.unites.0.codeUnite.codeUnite}} : {{paramAn.unites.0.codeUnite.nomUnite}}" readonly="readonly">
                                                                                {% endif %}
                                                                            {% else %}
                                                                                {% if paramAn.pgCmdAnalyse %}
                                                                                    <input id="idUniteCode{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" type="hidden" class="form-control" placeholder="unite" name ="uniteCode{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" value="{{ paramAn.pgCmdAnalyse.codeUnite.codeUnite }}">
                                                                                    <input id="idUnite{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" type="text" class="form-control" placeholder="unite" name ="unite{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" value="{{ paramAn.pgCmdAnalyse.codeUnite.codeUnite }} : {{ paramAn.pgCmdAnalyse.codeUnite.nomUnite }}">
                                                                                {% else %}
                                                                                    <input id="idUniteCode{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" type="hidden" class="form-control" placeholder="unite" name ="uniteCode{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" value="{{ paramAn.unite.codeUnite }}">
                                                                                    <input id="idUnite{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" class="form-control" placeholder="unite" name ="unite{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}" value="{{ paramAn.unite.codeUnite }} : {{ paramAn.unite.nomUnite }}" readonly="readonly">
                                                                                {% endif %}
                                                                            {% endif %}
                                                                        </div>
                                                                    </div> 
                                                                </td>
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' align="left">
                                                                    {% if paramAn.fraction %}
                                                                        <span class="text-left">{{ paramAn.fraction.nomFraction }}</span>
                                                                    {% endif %}
                                                                </td>

                                                            </tr>
                                                        {% else %}
                                                            {#{% if paramAn.pgCmdPrelevPc.numOrdre  == 1 %}#}
                                                            {% if paramAn.pgCmdAnalyse %}
                                                                {% if paramAn.pgCmdAnalyse.codeStatut == '0' %}
                                                                    <tr id='tr_{{ nbTr }}' class="success">
                                                                    {% elseif paramAn.pgCmdAnalyse.codeStatut == '1' %}
                                                                    <tr id='tr_{{ nbTr }}' class="warning" data-toggle="tooltip" data-placement="bottom" title="{{ paramAn.pgCmdAnalyse.libelleStatut}}">
                                                                    {% elseif paramAn.pgCmdAnalyse.codeStatut == '2' %}
                                                                    <tr id='tr_{{ nbTr }}' class="danger" data-toggle="tooltip" data-placement="bottom" title="{{ paramAn.pgCmdAnalyse.libelleStatut}}" >
                                                                    {% else %}
                                                                    <tr id='tr_{{ nbTr }}'>
                                                                    {% endif %}
                                                                {% else %}
                                                                <tr id='tr_{{ nbTr }}'>
                                                                {% endif %}

                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' align="right"></td>
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}'nowrap>{{ paramAn.paramAn.codeParametre.codeParametre }}</td>
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' align="left">{{ paramAn.paramAn.codeParametre.nomParametre }}</td>
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' align="left">{{ paramAn.paramAn.prestataire.nomCorres }}</td>
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}'align="right">
                                                                    <div class="form-group">
                                                                        <div class="input-group text-left">
                                                                            <select class="form-control" id="idRemarque{{ paramAn.paramAn.id}}" name="remarque{{ paramAn.paramAn.id}}"   >    
                                                                                <option value="1"  selected>1 : Donnée renseignée</option> 
                                                                                <option value="0">0 : Donnée absente</option> 
                                                                            </select>
                                                                        </div>
                                                                    </div> 
                                                                </td>
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' align="right">
                                                                    <div class="form-group">
                                                                        <div class="input-group text-right">
                                                                            {% if paramAn.valeurs  %}
                                                                                <select class="form-control" id="idValeur{{ paramAn.paramAn.id}}" name="valeur{{ paramAn.paramAn.id}}"   >   
                                                                                    <option value=""></option> 
                                                                                    {% for valeur in paramAn.valeurs %}
                                                                                        {% if paramAn.pgCmdAnalyse %}
                                                                                            {% if paramAn.pgCmdAnalyse.resultat == valeur.valeur %}
                                                                                                <option value="{{valeur.valeur  | replace({".00" : ""}) }}" selected>{{valeur.valeur  | replace({".00" : ""}) }} : {{valeur.libelle }}</option> 
                                                                                            {% else %}
                                                                                                <option value="{{valeur.valeur  | replace({".00" : ""}) }}">{{valeur.valeur  | replace({".00" : ""}) }} : {{ valeur.libelle }}</option> 
                                                                                            {% endif %}
                                                                                        {% else %}
                                                                                            <option value="{{valeur.valeur  | replace({".00" : ""}) }}">{{valeur.valeur  | replace({".00" : ""}) }} : {{ valeur.libelle}}</option> 
                                                                                        {% endif %}
                                                                                    {% endfor %}
                                                                                </select>
                                                                            {% else %}
                                                                                {% if paramAn.pgCmdAnalyse %}
                                                                                    <input id="idValeur{{ paramAn.paramAn.id}}" class="form-control number text-right" placeholder="valeur" name ="valeur{{ paramAn.paramAn.id}}" value="{{ paramAn.pgCmdAnalyse.resultat | replace({".0000000000" : "", "000000000" : "", "00000000" : "", "0000000" : "", "000000" : "", "00000000" : "", "0000000" : "", "000000" : ""}) }}">
                                                                                {% else %}
                                                                                    <input id="idValeur{{ paramAn.paramAn.id}}" class="form-control number text-right" placeholder="valeur" name ="valeur{{ paramAn.paramAn.id}}" value="">
                                                                                {% endif %}
                                                                            {% endif %}
                                                                        </div>
                                                                    </div> 
                                                                </td>
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' align="left">
                                                                    <div class="form-group">
                                                                        <div  class="input-group text-left">
                                                                            {% if paramAn.unites  %}
                                                                                {% if paramAn.unites | length > 1 %}
                                                                                    <select class="form-control" id="idUniteCode{{ paramAn.paramAn.id}}" name="uniteCode{{ paramAn.paramAn.id}}"   >   
                                                                                        {% for unite in paramAn.unites %}
                                                                                            <option value="{{unite.codeUnite.codeUnite}}">{{unite.codeUnite.codeUnite}} : {{ unite.codeUnite.nomUnite}}</option> 
                                                                                        {% endfor %}
                                                                                    </select>
                                                                                {% else %}
                                                                                    <input id="idUniteCode{{ paramAn.paramAn.id}}" type="hidden" class="form-control" placeholder="unite" name ="uniteCode{{ paramAn.paramAn.id}}" value="{{paramAn.unites.0.codeUnite.codeUnite}}" readonly="readonly">
                                                                                    <input id="idUnite{{ paramAn.paramAn.id}}" type="text" class="form-control" placeholder="unite" name ="unite{{ paramAn.paramAn.id}}" value="{{paramAn.unites.0.codeUnite.codeUnite}} : {{paramAn.unites.0.codeUnite.nomUnite}}" readonly="readonly">
                                                                                {% endif %}
                                                                            {% else %}
                                                                                {% if paramAn.pgCmdAnalyse %}
                                                                                    <input id="idUniteCode{{ paramAn.paramAn.id}}" type="hidden" class="form-control" placeholder="unite" name ="uniteCode{{ paramAn.paramAn.id}}" value="{{ paramAn.pgCmdAnalyse.codeUnite.codeUnite }}">
                                                                                    <input id="idUnite{{ paramAn.paramAn.id}}" type="text" class="form-control" placeholder="unite" name ="unite{{ paramAn.paramAn.id}}" value="{{ paramAn.pgCmdAnalyse.codeUnite.codeUnite }} : {{ paramAn.pgCmdAnalyse.codeUnite.nomUnite }}">
                                                                                {% else %}
                                                                                    <input id="idUniteCode{{ paramAn.paramAn.id}}" type="hidden" class="form-control" placeholder="unite" name ="uniteCode{{ paramAn.paramAn.id}}" value="{{ paramAn.unite.codeUnite }}">
                                                                                    <input id="idUnite{{ paramAn.paramAn.id}}" class="form-control" placeholder="unite" name ="unite{{ paramAn.paramAn.id}}" value="{{ paramAn.unite.codeUnite }} : {{ paramAn.unite.nomUnite }}" readonly="readonly">
                                                                                {% endif %}
                                                                            {% endif %}
                                                                        </div>
                                                                    </div> 
                                                                </td>
                                                                {% set nbTd = nbTd + 1 %}
                                                                <td id='td_{{ nbTd }}' align="left">
                                                                    {% if paramAn.fraction %}
                                                                        <span class="text-left">{{ paramAn.fraction.nomFraction }}</span>
                                                                    {% endif %}
                                                                </td>

                                                            </tr>
                                                            {#{% endif %}#}
                                                        {% endif %}
                                                    {% endif %}
                                                    {% endif %}
                                                        {% endif %}
                                                            {% endfor %}
                                                                </tbody>
                                                            </table>
                                                            {#  <div class="row">
                                                                   <div class="col-md-12 pull-right text-info">
                                                                     <ul class="list-inline">
                                                                         <li><span class="label label-success">Correct</span></li>
                                                                         <li><span class="label label-warning">Avertissement</span></li>
                                                                          <li><span class="label label-danger">Erreur</span></li>
                                                                     </ul>  
                                                                   </div>
                                                                 </div>      #}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            {% endfor %}

                                                <div class="row">
                                                    <div class="col-md-12 pull-right text-info">
                                                        <ul class="list-inline">
                                                            <li><span class="label label-success">Correcte</span></li>
                                                            <li><span class="label label-warning">Avertissement</span></li>
                                                            <li><span class="label label-danger">Erreur</span></li>
                                                        </ul>  
                                                    </div>
                                                </div>            

                                                {% if maj == 'M' %}
                                                    <div class="col-md-offset-5 col-md-8">
                                                        <button id="idEnregistrer" type="submit" class="btn btn-success"> 
                                                            <i class="fa fa-check"> Enregister</i>
                                                        </button>
                                                    {%elseif maj == 'V' %}
                                                        <div class="col-md-offset-5 col-md-8">
                                                            <button id="idEnregistrer" type="submit" class="btn btn-success"> 
                                                                <i class="fa fa-check"> Enregister</i>
                                                            </button>

                                                            <a class="btn btn-success" href="{{ path("AeagSqeBundle_saisieDonnees_lot_periode_lac_valider",{"prelevId":  cmdPrelev.id, "periodeAnId": periodeAn.id, "stationId": station.ouvFoncId}) }}">
                                                                <i class="fa fa-lock"> Valider</i>
                                                            </a>  
                                                        {% else %}
                                                            <div class="col-md-offset-5 col-md-8">
                                                            {% endif %}
                                                            <a class="btn btn-danger" href="{{path('AeagSqeBundle_saisieDonnees_lot_periode_lacs',{'stationId': station.ouvFoncId, 'periodeAnId': periodeAn.id, 'cmdDemandeId': demande.id })}}">
                                                                <i class="fa fa-undo"> Annuler</i>
                                                            </a>
                                                        </div>

                                                        <div id="idCache"></div>

                                                    </div>
                                                </div>
                                            </div>
                                            </form>

                                            {%endblock content %}    


                                                {% block scripts %}

                                                    jQuery(document).ready(function() {


                                                    {% for autreDemande in autreDemandes %}
                                                          {% for autrePrelev  in  autreDemande.prelevs %}
                                                              if ($("#profAna_{{ autrePrelev.prelevPc.zoneVerticale.codeZone }}_{{ autrePrelev.prelev.codeSupport.codeSupport }}").val() == ""){
                                                                  $('#nonRealise_{{ autrePrelev.prelevPc.zoneVerticale.codeZone }}_{{ autrePrelev.prelev.codeSupport.codeSupport }}').selected(true);
                                                                  $("#profAna_{{ autrePrelev.prelevPc.zoneVerticale.codeZone }}_{{ autrePrelev.prelev.codeSupport.codeSupport }}").removeAttr("required");
                                                                  $("#profAna_{{ autrePrelev.prelevPc.zoneVerticale.codeZone }}_{{ autrePrelev.prelev.codeSupport.codeSupport }}").removeAttr( "aria-required" );
                                                              }

                                                               $(document).on('click','#nonRealise_{{ autrePrelev.prelevPc.zoneVerticale.codeZone }}_{{ autrePrelev.prelev.codeSupport.codeSupport }}',function(e){
                                                               if ($('#nonRealise_{{ autrePrelev.prelevPc.zoneVerticale.codeZone }}_{{ autrePrelev.prelev.codeSupport.codeSupport }}').val() == 'N'){
                                                                   $('#nonRealise_{{ autrePrelev.prelevPc.zoneVerticale.codeZone }}_{{ autrePrelev.prelev.codeSupport.codeSupport }}').val('O');
                                                                   $("#profAna_{{ autrePrelev.prelevPc.zoneVerticale.codeZone }}_{{ autrePrelev.prelev.codeSupport.codeSupport }}").removeAttr("required");
                                                                   $("#profAna_{{ autrePrelev.prelevPc.zoneVerticale.codeZone }}_{{ autrePrelev.prelev.codeSupport.codeSupport }}").removeAttr( "aria-required" );
                                                                   }else{
                                                                   $('#nonRealise_{{ autrePrelev.prelevPc.zoneVerticale.codeZone }}_{{ autrePrelev.prelev.codeSupport.codeSupport }}').val('N');
                                                                   $("#profAna_{{ autrePrelev.prelevPc.zoneVerticale.codeZone }}_{{ autrePrelev.prelev.codeSupport.codeSupport }}").attr("required", "true");
                                                                    $("#profAna_{{ autrePrelev.prelevPc.zoneVerticale.codeZone }}_{{ autrePrelev.prelev.codeSupport.codeSupport }}").attr( "aria-required", "true" );
                                                                   }
                                                                });
                                                          {% endfor %}
                                                    {% endfor %}
                                                    
                                                    $(document).on('click','#idCommentaire{{ cmdPrelev.id }}',function(e){
                                                    e.preventDefault(); // J'empêche le comportement par défaut du navigateur, c-à-d de soumettre le formulaire
                                                    $('#modal-commentaire').modal('toggle');
                                                    });

                                                    $(document).on('click','#idenregisterCommentaire',function(e){
                                                    e.preventDefault(); // J'empêche le comportement par défaut du navigateur, c-à-d de soumettre le formulaire
                                                    $('#modalTraitementEncours').modal('toggle');
                                                    var $this = $('#idFormCommentaire');
                                                    var url = '{{ path("AeagSqeBundle_saisieDonnees_lot_periode_station_saisir_commentaire",{"periodeAnId": "par1", "prelevId":  "par2", }) }}', // Le nom du fichier indiqué dans le formulaire
                                                    url = url.replace("par1", {{ periodeAn.id }});
                                                    url = url.replace("par2", {{ cmdPrelev.id }});
                                                    url = url.replace("amp;","");
                                                    $.ajax({
                                                    url: url,
                                                    type: 'post', 
                                                    data: $this.serialize(),
                                                    success: function(html) { // Je récupère la réponse du fichier PHP
                                                    $('#modal-commentaire').hide();
                                                    $('#modalTraitementEncours').modal('hide');
                                                    }
                                                    });
                                                    });



                                                    $('#datePrel').datetimepicker(
                                                    {
                                                    language:  'fr',
                                                   format: 'dd/mm/yyyy hh:ii',
                                                    startDate: "{{ periodeAn.periode.dateDeb| date_modify("+6 hour") | date("d/m/Y H:i") }}",
                                                    endDate: "{{  dateFin | date_modify("+23 hour") | date("d/m/Y H:i") }}",
                                                    autoclose: true   
                                                    }
                                                    );



                                                    {% for groupe   in  groupes %}


                                                        $('#idCollapse{{groupe.grparAn.id}}').on('click',function(){
                                                        if ($('#idCollapseI{{groupe.grparAn.id}}').hasClass("fa-compress")){
                                                        $('#idCollapseI{{groupe.grparAn.id}}').removeClass("fa-compress").addClass("fa-expand");
                                                        $('#collapse{{groupe.grparAn.id}}').collapse('hide');
                                                        }else{
                                                        $('#idCollapseI{{groupe.grparAn.id}}').removeClass("fa-expand").addClass("fa-compress");
                                                        $('#collapse{{groupe.grparAn.id}}').collapse('show');
                                                        }
                                                        });

                                                        {% if  groupe.grparAn.grparRef.typeGrp == 'SIT'%}
                                                            var table{{groupe.grparAn.id }} = $('#idTable{{ groupe.grparAn.id }}').DataTable(
                                                            {"stateSave": false,
                                                            "order": [[ 1, "asc" ],[ 0, "asc" ]],
                                                            "language": {
                                                            "url": "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/French.json"
                                                            },
                                                            "aLengthMenu": [
                                                            [10, 25, 50, 100, -1],
                                                            [10, 25, 50, 100, "Tous"]
                                                            ],
                                                            "iDisplayLength": -1
                                                            }
                                                            );
                                                        {% else%}
                                                            var table{{groupe.grparAn.id }} = $('#idTable{{ groupe.grparAn.id }}').DataTable(
                                                            {"stateSave": false,
                                                            "order": [[ 0, "asc" ]],
                                                            "language": {
                                                            "url": "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/French.json"
                                                            },
                                                            "aLengthMenu": [
                                                            [10, 25, 50, 100, -1],
                                                            [10, 25, 50, 100, "Tous"]
                                                            ],
                                                            "iDisplayLength": -1
                                                            }
                                                            );
                                                        {% endif %}

                                                        var nbParamSaisis{{groupe.grparAn.id }} = parseInt($('#paramSaisis{{ groupe.grparAn.id}}').html());

                                                        {% if groupe.grparAn.grparRef.typeGrp == 'ENV'  %}
                                                            {% for paramAn in groupe.paramAns %}

                                                                $(document).on('keydown','#idValeur{{ paramAn.paramAn.id}}',function(e){
                                                                var code = e.keyCode || e.which;
                                                                if (code == 9) {
                                                                e.preventDefault();
                                                                var tdEnCours =$(this).parent().parent().parent().attr('id');
                                                                nbEncours = tdEnCours.substring(3);
                                                                nbSuivant = parseInt(nbEncours) + 7;
                                                                $('#td_' + nbSuivant + '> div> div>:nth-child(1)').focus();
                                                                };
                                                                });


                                                                {% if paramAn.pgCmdMesureEnv %}
                                                                    nbParamSaisis{{groupe.grparAn.id }} = nbParamSaisis{{groupe.grparAn.id }} + 1;
                                                                    $('#paramSaisis{{ groupe.grparAn.id}}').empty().html(nbParamSaisis{{groupe.grparAn.id }});
                                                                    var valeur =   {{  paramAn.pgCmdMesureEnv.codeRemarque }}
                                                                    $("#idRemarque{{ paramAn.paramAn.id}} option[value='" + valeur + "']").attr('selected','selected');
                                                                    $("#idRemarque{{ paramAn.paramAn.id}}").val(valeur);
                                                                    if ($("#idValeur{{ paramAn.paramAn.id}}").val() == "" ){
                                                                    $('#idRemarque{{ paramAn.paramAn.id}} option:selected').removeAttr('selected');
                                                                    var remarque =  "0";
                                                                    $("#idRemarque{{ paramAn.paramAn.id}} option[value='" + remarque + "']").attr('selected','selected');
                                                                    $("#idRemarque{{ paramAn.paramAn.id}}").val(remarque);
                                                                    };
                                                                    {% for valeur in paramAn.valeurs %}
                                                                        {% if paramAn.pgCmdMesureEnv.resultat | replace({".0000000000" : "", "000000000" : "", "00000000" : "", "0000000" : "", "000000" : "", "00000000" : "", "0000000" : "", "000000" : ""})  == valeur.valeur  | replace({".00" : ""}) %}
                                                                            $('#idValeur{{ paramAn.paramAn.id}} option:selected').removeAttr('selected');
                                                                            var valeur =   {{ valeur.valeur |  replace({".00" : ""})}}
                                                                            $("#idValeur{{ paramAn.paramAn.id}} option[value='" + valeur + "']").attr('selected','selected');
                                                                            $("#idValeur{{ paramAn.paramAn.id}}").val(valeur);
                                                                        {% endif %}
                                                                    {% endfor %}
                                                                {% endif %}
                                                                $(document).on('change','#idValeur{{ paramAn.paramAn.id}}',function(e){
                                                                if ($("#idValeur{{ paramAn.paramAn.id}}").val() != "" ){
                                                                var remarque =  "1";
                                                                }else{
                                                                var remarque =  "0";
                                                                }
                                                                $('#idRemarque{{ paramAn.paramAn.id}} option:selected').removeAttr('selected');
                                                                $("#idRemarque{{ paramAn.paramAn.id}} option[value='" + remarque + "']").attr('selected','selected');
                                                                $("#idRemarque{{ paramAn.paramAn.id}}").val(remarque);

                                                                if ($("#idValeur{{ paramAn.paramAn.id}}").val() == "" ){
                                                                nbParamSaisis{{groupe.grparAn.id }} = nbParamSaisis{{groupe.grparAn.id }} - 1;
                                                                }else{
                                                                nbParamSaisis{{groupe.grparAn.id }} = nbParamSaisis{{groupe.grparAn.id }} + 1;
                                                                };
                                                                $('#paramSaisis{{ groupe.grparAn.id}}').empty().html(nbParamSaisis{{groupe.grparAn.id }});

                                                                {# var tdEnCours =$(this).parent().parent().parent().attr('id');
                                                                 nbEncours = tdEnCours.substring(3);
                                                                 nbSuivant = parseInt(nbEncours) + 6;
                                                                  $('#td_' + nbSuivant + '> div> div>:nth-child(1)').focus();#}
                                                                });


                                                                $(document).on('change','#idRemarque{{ paramAn.paramAn.id}}',function(e){
                                                                if ($("#idRemarque{{ paramAn.paramAn.id}}").val() == "0" ){
                                                                $("#idValeur{{ paramAn.paramAn.id}}").val(null);
                                                                }
                                                                });

                                                                {% for unite in paramAn.unites %}
                                                                    {% if paramAn.pgCmdMesureEnv %}
                                                                        {% if paramAn.pgCmdMesureEnv.codeUnite.codeUnite == unite.codeUnite.codeUnite %}
                                                                            $('#idUniteCode{{ paramAn.paramAn.id}} option:selected').removeAttr('selected');
                                                                            var valeur =   '{{ paramAn.pgCmdMesureEnv.codeUnite.codeUnite }}';
                                                                            $("#idUniteCode{{ paramAn.paramAn.id}} option[value='" + valeur + "']").attr('selected','selected');
                                                                            $("#idUniteCode{{ paramAn.paramAn.id}}").val(valeur);
                                                                        {% endif %}
                                                                    {% elseif paramAn.unite %}
                                                                        {% if paramAn.unite.codeUnite == unite.codeUnite.codeUnite %}
                                                                            $('#idUniteCode{{ paramAn.paramAn.id}} option:selected').removeAttr('selected');
                                                                            var valeur =   '{{ paramAn.unite.codeUnite }}';
                                                                            $("#idUniteCode{{ paramAn.paramAn.id}} option[value='" + valeur + "']").attr('selected','selected');
                                                                            $("#idUniteCode{{ paramAn.paramAn.id}}").val(valeur);
                                                                        {% endif %}
                                                                    {% endif %}
                                                                {% endfor %}
                                                            {% endfor %}
                                                        {% endif %}

                                                        {% if groupe.grparAn.grparRef.typeGrp == 'SIT'  %}

                                                            {% for paramAn in groupe.paramAns %}


                                                                {% if paramAn.paramAn.codeParametre.codeParametre  == '1301' or 
                                    paramAn.paramAn.codeParametre.codeParametre  == '1302' or 
                                    paramAn.paramAn.codeParametre.codeParametre  == '1303' or
                                    paramAn.paramAn.codeParametre.codeParametre  == '1311' or 
                                    paramAn.paramAn.codeParametre.codeParametre  == '1312' %}

                                                                {% if paramAn.pgCmdAnalyse %}

                                                                    $(document).on('keydown','#idValeur{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }}',function(e){
                                                                    var code = e.keyCode || e.which;
                                                                    if (code == 9) {
                                                                    e.preventDefault();
                                                                    var tdEnCours =$(this).parent().parent().parent().attr('id');
                                                                    nbEncours = tdEnCours.substring(3);
                                                                    nbSuivant = parseInt(nbEncours) + 8;
                                                                    $('#td_' + nbSuivant + '> div> div>:nth-child(1)').focus();
                                                                    };
                                                                    });

                                                                    nbParamSaisis{{groupe.grparAn.id }} = nbParamSaisis{{groupe.grparAn.id }} + 1;
                                                                    $('#paramSaisis{{ groupe.grparAn.id}}').empty().html(nbParamSaisis{{groupe.grparAn.id }});
                                                                    var valeur =   {{  paramAn.pgCmdAnalyse.codeRemarque }}
                                                                    $("#idRemarque{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }} option[value='" + valeur + "']").attr('selected','selected');
                                                                    $("#idRemarque{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }}").val(valeur);
                                                                    if ($("#idValeur{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }}").val() == "" ){
                                                                    $('#idRemarque{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }} option:selected').removeAttr('selected');
                                                                    var remarque =  "0";
                                                                    $("#idRemarque{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }} option[value='" + remarque + "']").attr('selected','selected');
                                                                    $("#idRemarque{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }}").val(remarque);
                                                                    };
                                                                    {% for valeur in paramAn.valeurs %}
                                                                        {% if paramAn.pgCmdAnalyse.resultat | replace({".0000000000" : "", "000000000" : "", "00000000" : "", "0000000" : "", "000000" : "", "00000000" : "", "0000000" : "", "000000" : ""})  == valeur.valeur  | replace({".00" : ""}) %}
                                                                            $('#idValeur{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }} option:selected').removeAttr('selected');
                                                                            var valeur =   {{ valeur.valeur |  replace({".00" : ""}) }}
                                                                            $("#idValeur{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }} option[value='" + valeur + "']").attr('selected','selected');
                                                                            $("#idValeur{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }}").val(valeur);
                                                                        {% endif %}
                                                                    {% endfor %}

                                                                    $(document).on('change','#idValeur{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }}',function(e){
                                                                    if ($("#idValeur{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}").val() != "" ){
                                                                    var remarque =  "1";
                                                                    }else{
                                                                    var remarque =  "0";
                                                                    }
                                                                    $('#idRemarque{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }} option:selected').removeAttr('selected');
                                                                    $("#idRemarque{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }} option[value='" + remarque + "']").attr('selected','selected');
                                                                    $("#idRemarque{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }}").val(remarque);

                                                                    if ($("#idValeur{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }}").val() == "" ){
                                                                    nbParamSaisis{{groupe.grparAn.id }} = nbParamSaisis{{groupe.grparAn.id }} - 1;
                                                                    }else{
                                                                    nbParamSaisis{{groupe.grparAn.id }} = nbParamSaisis{{groupe.grparAn.id }} + 1;
                                                                    };
                                                                    $('#paramSaisis{{ groupe.grparAn.id}}').empty().html(nbParamSaisis{{groupe.grparAn.id }});
                                                                    });

                                                                    $(document).on('change','#idRemarque{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }}',function(e){
                                                                    if ($("#idRemarque{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }}").val() == "0" ){
                                                                    $("#idValeur{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }}").val(null);
                                                                    }
                                                                    });
                                                                    {% for unite in paramAn.unites %}
                                                                        {% if paramAn.pgCmdAnalyse %}
                                                                            {% if paramAn.pgCmdAnalyse.codeUnite.codeUnite == unite.codeUnite.codeUnite %}
                                                                                $('#idUniteCode{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }} option:selected').removeAttr('selected');
                                                                                var valeur =   '{{ unite.codeUnite.codeUnite }}';
                                                                                $("#idUniteCode{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }} option[value='" + valeur + "']").attr('selected','selected');
                                                                                $("#idUniteCode{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }}").val(valeur);
                                                                            {% endif %}
                                                                        {% elseif paramAn.unite %}
                                                                            {% if paramAn.unite.codeUnite == unite.codeUnite.codeUnite %}
                                                                                $('#idUniteCode{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }} option:selected').removeAttr('selected');
                                                                                var valeur =   '{{ paramAn.unite.codeUnite }}';
                                                                                $("#idUniteCode{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }} option[value='" + valeur + "']").attr('selected','selected');
                                                                                $("#idUniteCode{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdAnalyse.numOrdre }}").val(valeur);
                                                                            {% endif %}
                                                                        {% endif %}
                                                                    {% endfor %}
                                                                {% endif %}

                                                                $(document).on('keydown','#idValeur{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}',function(e){
                                                                var code = e.keyCode || e.which;
                                                                if (code == 9) {
                                                                e.preventDefault();
                                                                var tdEnCours =$(this).parent().parent().parent().attr('id');
                                                                nbEncours = tdEnCours.substring(3);
                                                                nbSuivant = parseInt(nbEncours) + 8;
                                                                $('#td_' + nbSuivant + '> div> div>:nth-child(1)').focus();
                                                                };
                                                                });

                                                                $(document).on('change','#idValeur{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}',function(e){
                                                                if ($("#idValeur{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}").val() != "" ){
                                                                var remarque =  "1";
                                                                }else{
                                                                var remarque =  "0";
                                                                }
                                                                $('#idRemarque{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }} option:selected').removeAttr('selected');
                                                                $("#idRemarque{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }} option[value='" + remarque + "']").attr('selected','selected');
                                                                $("#idRemarque{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}").val(remarque);


                                                                if ($("#idValeur{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}").val() == "" ){
                                                                nbParamSaisis{{groupe.grparAn.id }} = nbParamSaisis{{groupe.grparAn.id }} - 1;
                                                                }else{
                                                                nbParamSaisis{{groupe.grparAn.id }} = nbParamSaisis{{groupe.grparAn.id }} + 1;
                                                                };
                                                                $('#paramSaisis{{ groupe.grparAn.id}}').empty().html(nbParamSaisis{{groupe.grparAn.id }});
                                                                });

                                                                $(document).on('change','#idRemarque{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}',function(e){
                                                                if ($("#idRemarque{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}").val() == "0" ){
                                                                $("#idValeur{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}").val(null);
                                                                }
                                                                });



                                                                {% for unite in paramAn.unites %}
                                                                    {% if paramAn.pgCmdAnalyse %}
                                                                        {% if paramAn.pgCmdAnalyse.codeUnite.codeUnite == unite.codeUnite.codeUnite %}
                                                                            $('#idUniteCode{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }} option:selected').removeAttr('selected');
                                                                            var valeur =   '{{ unite.codeUnite.codeUnite }}';
                                                                            $("#idUniteCode{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }} option[value='" + valeur + "']").attr('selected','selected');
                                                                            $("#idUniteCode{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}").val(valeur);
                                                                        {% endif %}
                                                                    {% elseif paramAn.unite %}
                                                                        {% if paramAn.unite.codeUnite == unite.codeUnite.codeUnite %}
                                                                            $('#idUniteCode{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }} option:selected').removeAttr('selected');
                                                                            var valeur =   '{{ paramAn.unite.codeUnite }}';
                                                                            $("#idUniteCode{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }} option[value='" + valeur + "']").attr('selected','selected');
                                                                            $("#idUniteCode{{ paramAn.paramAn.id}}-{{ paramAn.pgCmdPrelevPc.numOrdre }}").val(valeur);
                                                                        {% endif %}
                                                                    {% endif %}
                                                                {% endfor %}
                                                            {% else %}

                                                                $(document).on('keydown','#idValeur{{ paramAn.paramAn.id}}',function(e){
                                                                var code = e.keyCode || e.which;
                                                                if (code == 9) {
                                                                e.preventDefault();
                                                                var tdEnCours =$(this).parent().parent().parent().attr('id');
                                                                nbEncours = tdEnCours.substring(3);
                                                                nbSuivant = parseInt(nbEncours) + 8;
                                                                $('#td_' + nbSuivant + '> div> div>:nth-child(1)').focus();
                                                                };
                                                                });

                                                                {% if paramAn.pgCmdAnalyse %}
                                                                    nbParamSaisis{{groupe.grparAn.id }} = nbParamSaisis{{groupe.grparAn.id }} + 1;
                                                                    $('#paramSaisis{{ groupe.grparAn.id}}').empty().html(nbParamSaisis{{groupe.grparAn.id }});
                                                                    var valeur =   {{  paramAn.pgCmdAnalyse.codeRemarque }}
                                                                    $("#idRemarque{{ paramAn.paramAn.id}} option[value='" + valeur + "']").attr('selected','selected');
                                                                    $("#idRemarque{{ paramAn.paramAn.id}}").val(valeur);
                                                                    if ($("#idValeur{{ paramAn.paramAn.id}}").val() == "" ){
                                                                    $('#idRemarque{{ paramAn.paramAn.id}} option:selected').removeAttr('selected');
                                                                    var remarque =  "0";
                                                                    $("#idRemarque{{ paramAn.paramAn.id}} option[value='" + remarque + "']").attr('selected','selected');
                                                                    $("#idRemarque{{ paramAn.paramAn.id}}").val(remarque);
                                                                    };
                                                                    {% for valeur in paramAn.valeurs %}
                                                                        {% if paramAn.pgCmdAnalyse.resultat | replace({".0000000000" : "", "000000000" : "", "00000000" : "", "0000000" : "", "000000" : "", "00000000" : "", "0000000" : "", "000000" : ""})  == valeur.valeur  | replace({".00" : ""}) %}
                                                                            $('#idValeur{{ paramAn.paramAn.id}} option:selected').removeAttr('selected');
                                                                            var valeur =   {{ valeur.valeur |  replace({".00" : ""}) }}
                                                                            $("#idValeur{{ paramAn.paramAn.id}} option[value='" + valeur + "']").attr('selected','selected');
                                                                            $("#idValeur{{ paramAn.paramAn.id}}").val(valeur);
                                                                        {% endif %}
                                                                    {% endfor %}
                                                                {% endif %}

                                                                $(document).on('change','#idValeur{{ paramAn.paramAn.id}}',function(e){
                                                                if ($("#idValeur{{ paramAn.paramAn.id}}").val() != "" ){
                                                                $('#idRemarque{{ paramAn.paramAn.id}} option:selected').removeAttr('selected');
                                                                var remarque =  "1";
                                                                $("#idRemarque{{ paramAn.paramAn.id}} option[value='" + remarque + "']").attr('selected','selected');
                                                                $("#idRemarque{{ paramAn.paramAn.id}}").val(remarque);
                                                                }

                                                                if ($("#idValeur{{ paramAn.paramAn.id}}").val() == "" ){
                                                                nbParamSaisis{{groupe.grparAn.id }} = nbParamSaisis{{groupe.grparAn.id }} - 1;
                                                                }else{
                                                                nbParamSaisis{{groupe.grparAn.id }} = nbParamSaisis{{groupe.grparAn.id }} + 1;
                                                                };
                                                                $('#paramSaisis{{ groupe.grparAn.id}}').empty().html(nbParamSaisis{{groupe.grparAn.id }});
                                                                });

                                                                $(document).on('change','#idRemarque{{ paramAn.paramAn.id}}',function(e){
                                                                if ($("#idRemarque{{ paramAn.paramAn.id}}").val() == "0" ){
                                                                $("#idValeur{{ paramAn.paramAn.id}}").val(null);
                                                                }
                                                                });

                                                                {% for unite in paramAn.unites %}
                                                                    {% if paramAn.pgCmdAnalyse %}
                                                                        {% if paramAn.pgCmdAnalyse.codeUnite.codeUnite == unite.codeUnite.codeUnite %}
                                                                            $('#idUniteCode{{ paramAn.paramAn.id}} option:selected').removeAttr('selected');
                                                                            var valeur =   '{{ unite.codeUnite.codeUnite }}';
                                                                            $("#idUniteCode{{ paramAn.paramAn.id}} option[value='" + valeur + "']").attr('selected','selected');
                                                                            $("#idUniteCode{{ paramAn.paramAn.id}}").val(valeur);
                                                                        {% endif %}
                                                                    {% elseif paramAn.unite %}
                                                                        {% if paramAn.unite.codeUnite == unite.codeUnite.codeUnite %}
                                                                            $('#idUniteCode{{ paramAn.paramAn.id}} option:selected').removeAttr('selected');
                                                                            var valeur =   '{{ paramAn.unite.codeUnite }}';
                                                                            $("#idUniteCode{{ paramAn.paramAn.id}} option[value='" + valeur + "']").attr('selected','selected');
                                                                            $("#idUniteCode{{ paramAn.paramAn.id}}").val(valeur);
                                                                        {% endif %}
                                                                    {% endif %}
                                                                {% endfor %}

                                                                {% endif %}
                                                                    {% endfor %}
                                                                        {% endif %}

                                                                            $('#idCollapseI{{groupe.grparAn.id}}').removeClass("fa-compress").addClass("fa-expand");
                                                                            $('#collapse{{groupe.grparAn.id}}').collapse('hide');
                                                                            $('#expandAll{{groupe.grparAn.id}}').show();
                                                                            $('#collapseAll{{groupe.grparAn.id}}').hide(); 


                                                                            {% endfor %}


                                                                                $('#expandAll').show();
                                                                                $('#collapseAll').hide();          

                                                                                $('#expandAll').on('click',function(){
                                                                                {% for groupe   in  groupes %}
                                                                                    $('#idCollapseI{{groupe.grparAn.id}}').removeClass("fa-expand").addClass("fa-compress");
                                                                                    $('#collapse{{groupe.grparAn.id}}').collapse('show');
                                                                                    $('#expandAll{{groupe.grparAn.id}}').hide();
                                                                                    $('#collapseAll{{groupe.grparAn.id}}').show();          
                                                                                {% endfor %}
                                                                                $('#expandAll').hide();
                                                                                $('#collapseAll').show();
                                                                                });

                                                                                $('#collapseAll').on('click',function(){
                                                                                {% for groupe   in  groupes %}
                                                                                    $('#idCollapseI{{groupe.grparAn.id}}').removeClass("fa-compress").addClass("fa-expand");
                                                                                    $('#collapse{{groupe.grparAn.id}}').collapse('hide');
                                                                                    $('#expandAll{{groupe.grparAn.id}}').show();
                                                                                    $('#collapseAll{{groupe.grparAn.id}}').hide(); 
                                                                                {% endfor %}
                                                                                $('#expandAll').show();
                                                                                $('#collapseAll').hide();
                                                                                });

                                                                                $(document).on('click', '#idEnregistrer',function(e){
                                                                                $('#modalTraitementEncours').modal();
                                                                                {#   {% for groupe   in  groupes %}
                                                                                           $('#collapse{{groupe.grparAn.id}}').collapse('show');
                                                                                            var nbRecords = $('#idTable{{ groupe.grparAn.id}}_length option:selected').val();
                                                                                            table{{groupe.grparAn.id }}.page.len( -1 ).draw();
                                                                                      {% endfor %}
                                                                                      alert('ici');#}
                                                                                $('#idForm').submit();
                                                                                });

                                                                                if ($('#idGroupeSelectionne').val() == ''){
                                                                                $('#idGenerer').hide();
                                                                                }

                                                                                var groupeSelectionne = $('#idGroupeSelectionne').val();

                                                                                $(document).on('click','#idGenerer',function(e){
                                                                                e.preventDefault(); // J'empêche le comportement par défaut du navigateur, c-à-d de soumettre le formulaire
                                                                                $('#modal-generer').modal('hide');
                                                                                $('#modalTraitementEncours').modal('toggle');
                                                                                var url = '{{ path("AeagSqeBundle_saisieDonnees_lot_periode_lac_env_situ_generer",{"periodeAnId": "par1", "prelevId":  "par2", "groupeId" : "par3", "profMax" : "par4", "ecart" : "par5"}) }}', // Le nom du fichier indiqué dans le formulaire
                                                                                url = url.replace("par1", {{ periodeAn.id }}); 
                                                                                url = url.replace("par2", {{ cmdPrelev.id }});
                                                                                url = url.replace("par3", groupeSelectionne);
                                                                                url = url.replace("par4", $('#profMax').val());
                                                                                url = url.replace("par5", $('#ecart').val());
                                                                                url = url.replace("amp;","");
                                                                                window.location.replace(url);
                                                                                });

                                                                                });

                                                                                {%endblock scripts %}    